<!DOCTYPE html>
<html>
<meta charset="utf-8">
<style>

 /* CSS goes here. */

</style>
<body>
    <script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="//d3js.org/topojson.v1.min.js"></script>
    <script>

     var w = 2000,
         h = 500;

     var barPadding = 1;

     var svg = d3.select("body").append("svg")
                 .attr("width", w)
                 .attr("height", h);

    var scale = d3.scale.linear()
                    .domain([2, 3000])
                    .range([10, 500]);

    var xAxis = d3.svg.axis()
                      .scale(scale)
                      .orient("bottom");

     d3.json('binned2.json', function(error, binned2) {
         data = []
         for (x in binned2.data) {
             data.push(binned2.data[x])
         }
         // data.sort(function(a,b) {return a-b});
         svg.selectAll("rect")
            .data(data)
            .enter()
            .append("rect") // do we need to set x to 0?
            .attr("x", function(d) {
                return 20;
            })
            .attr("y", function(d, i) {
                return i * h / data.length;
            })
            .attr("width", function(d) {
                return scale(d);
            })
            .attr("height", function(d) {
                return h / data.length - barPadding;
            })

            .attr("fill", function(d) {
            return "rgb(0 , 0 ," + (d - 100) + ")";
            });

        svg.append("g")
    .call(xAxis);


     svg.selectAll("text")
               .data(data)
               .enter()
               .append("text")
               .text(function(d) {
                    return d;
               })
               .attr("text-anchor", "middle")
               .attr("x", function(d) {
                    return scale(d) - 5;
               })
               .attr("y", function(d, i) {
                    return i * (h / data.length) + (h / data.length - barPadding) / 2;
               })
               .attr("font-family", "sans-serif")
               .attr("font-size", "11px")
               .attr("fill", "white");
 })

    </script>
</body>
</html>
